# 奇异眼睛项目中文说明
## 屏幕配置说明
对于80x160分辨率的ST7735屏幕，我们进行了以下优化：

1. 在config.h中:
   - 定义ST7735_SCREEN_WIDTH = 80和ST7735_SCREEN_HEIGHT = 160
   - 启用SYMMETRICAL_EYELID使眼睛形状更适合竖屏显示
   - 将ESP32的旋转参数设为1（90度旋转）
   - 启用PIXEL_DOUBLE使图形能更好地适应小屏幕
   - 将SPI频率设为80MHz获得最佳性能: SPI_FREQ = 80000000

2. 在uncannyEyes.ino中:
   - 使用INITR_MINI160x80初始化参数
   - 设置地址窗口时交换宽高: setAddrWindow(0, 0, ST7735_SCREEN_HEIGHT, ST7735_SCREEN_WIDTH)

## 眼睛渲染原理

drawEye函数是眼睛渲染的核心，主要参数说明：

- e: 眼睛索引，单眼时为0，双眼时为0和1
- iScale: 虹膜缩放因子(0-1023)，控制瞳孔大小
- scleraX/scleraY: 眼白偏移量，决定眼球转动位置
- uT/lT: 上下眼皮阈值，控制眨眼效果

渲染步骤：

1. 同步双眼数据（如启用）
2. 应用PIXEL_DOUBLE偏移调整
3. 计算虹膜阈值和缩放比例
4. 设置SPI并选择眼睛显示器
5. 配置显示地址窗口
6. 逐行扫描渲染：
   - 判断每个像素是被眼皮覆盖、在眼白区域还是在虹膜区域
   - 计算虹膜极坐标映射
   - 应用DMA或直接SPI传输像素数据

## 性能优化

- ESP32使用80MHz SPI频率获得最高帧率
- 使用DMA传输减少CPU负载
- PIXEL_DOUBLE减少需要计算的像素数量

## 调试技巧

如果显示不正常：
1. 尝试不同的旋转值(0-3)
2. 调整SPI频率，特别是如果出现显示错误
3. 确保正确定义了屏幕分辨率
4. 检查SPI连接和屏幕初始化参数
